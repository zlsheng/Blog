<#include "../common/_public.html"/>
<link rel="stylesheet" href="${base}/layui/css/layui.css"  media="all">
<fieldset class="layui-elem-field">
    <legend>新增用户</legend>
    <form class="layui-form" action="" >
        <div class="layui-form-item">
            <label class="layui-form-label"><span style="color: red">*</span>登录名</label>
            <div class="layui-input-inline">
                <input type="text" name="uLoginid"   lay-verify="loginName" placeholder="${sysUser.uLoginid!'请输入登录名'}" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label"><span style="color: red">*</span>密码</label>
            <div class="layui-input-inline">
                <input type="password" name="uPassword"  lay-verify="pass" placeholder="${sysUser.uPassword!'请输入密码'}" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">手机号</label>
            <div class="layui-input-inline">
                <input type="text" name="uPhone"   lay-verify="phone" placeholder="${sysUser.uPhone!'请输入手机号'}" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">邮箱</label>
            <div class="layui-input-inline">
                <input type="text" name="uEmail"  lay-verify="email"  placeholder="${sysUser.uEmail!'请输入邮箱'}" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-input-block">
                <button class="layui-btn" lay-submit lay-filter="formDemo">添加</button>
                <button class="layui-btn "  onclick="closedView()">关闭</button>
            </div>
        </div>
    </form>
</fieldset>
<script src="${base}/layui/layui.js" charset="UTF-8"></script>
<script>
    layui.use(['element','rate','layer','form'], function(){
        var element = layui.element,
                rate = layui.rate,
                layer = layui.layer,
                $ = layui.$,
                form = layui.form;
        form.verify({
            loginName:function (value) {
                if(!new RegExp("^[a-zA-Z]{1}").test(value)){
                    return '用户名第一位不能是数字或特殊字符';
                }
                if(value.length < 5){
                    return '用户名最少包含5个字符';
                }
                if (!new RegExp("^[a-zA-Z]{1}[a-zA-Z0-9]{4,}$").test(value)){
                    return '用户名不能含有特殊字符';
                }
            }
            ,pass: [/(.+){6,18}$/, '密码必须6到12位']
            ,phone:[/^1[3|7|5|8][0-9]\d{8}$/,'请输入正确的手机号']
            ,email:[/^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/,'请输入正确的邮箱地址']
        });

        //监听提交
        form.on('submit(formDemo)', function(data){
            layer.msg(JSON.stringify(data.field));
            return false;
        });

      /*  form.on('click(closed)',function (data) {
            alert("点击了关闭按钮");

        })*/
    });

    function closedView() {
        //alert("点击了关闭按钮");
        var index = parent.layer.getFrameIndex(window.name);
        parent.layer.close(index);
    }
</script>