<#include "../common/_public.html"/>
    <link rel="stylesheet" href="${base}/layui/css/layui.css"  media="all">
<form class="layui-form">
<div class="layui-fluid">
    <div class="layui-card">
            <div class="layui-form layui-card-header layuiadmin-card-header-auto" lay-filter="layadmin-useradminrole-formlist">
                <div class="layui-form-item">
                    <div class="layui-inline">
                        <label class="layui-form-label">角色筛选</label>
                        <div class="layui-input-block">
                            <select name="role">
                                <option value="">--请选择--</option>
                            <#list roles as role>
                                <option value="${role.id!}">${role.name!}</option>
                            </#list>
                            </select>
                        </div>
                    </div>
                    <div class="layui-inline">
                        <button class="layui-btn" lay-submit lay-filter="LAY-user-back-search">
                            <i class="layui-icon layui-icon-search "></i>
                        </button>
                    </div>
                </div>
            </div>
</form>
        <div class="layui-card-body">
            <div style="padding-bottom: 10px;">
                <button class="layui-btn layui-btn-role" data-type="add">添加</button>
                <button class="layui-btn layui-btn-role" data-type="edit">编辑</button>
                <button class="layui-btn layui-btn-role" data-type="delete">删除</button>
            </div>

            <table id="LAY-user-back-role" class="layui-table" lay-filter="user_table" >
                <thead>
                <tr>
                    <th style="width: 20px"></th>
                    <th style="text-align:center;vertical-align:middle;">角色名称</th>
                    <th style="text-align:center;vertical-align:middle;">角色编码</th>
                    <th style="text-align:center;vertical-align:middle;">角色描述</th>
                    <th style="text-align:center;vertical-align:middle;">创建人</th>
                    <th style="text-align:center;vertical-align:middle;">创建时间</th>
                    <th style="text-align:center;vertical-align:middle;">状态</th>
                </tr>
                </thead>
                <tbody>
                         <#list entitys as entity>
                         <tr>
                             <td style="text-align:center;vertical-align:middle;"><input type="checkbox" name="checkbox" lay-skin="primary" value="${entity.id}"></td>
                             <td style="text-align:center;vertical-align:middle;">${entity.name!}</td>
                             <td style="text-align:center;vertical-align:middle;">${entity.code!}</td>
                             <td style="text-align:center;vertical-align:middle;">${entity.description!}</td>
                             <td style="text-align:center;vertical-align:middle;">${entity.creatorName!}</td>
                             <td style="text-align:center;vertical-align:middle;">${(entity.createTime?string('yyyy-MM-dd'))!}</td>
                             <td style="text-align:center;vertical-align:middle;">
                                 <#if entity.status = '11'>
                                     <label style="color: green">启用</label>
                                 </#if>
                                 <#if entity.status = '00'>
                                     <label style="color: red">禁用</label>
                                 </#if>
                             </td>
                             </td>
                         </tr>
                         </#list>
                </tbody>
            </table>

        </div>
    </div>
</div>

<script src="${base}/layui/layui.js" charset="UTF-8"></script>
<script src="${base}/layui/lay/js/tangram.js" charset="UTF-8"></script>
<script>
    layui.use(['form','element','table'], function(){
        var form = layui.form,
            element = layui.element,
            $ = layui.$;
        $('.layui-btn.layui-btn-role').on('click', function(){
            var ids = layui.$("input:checkbox[name='checkbox']:checked");
            if(ids.size() != 1){
                layer.msg('只能选择一条数据', {
                    icon:2,
                    time: 2000,
                    offset:'70px'
                });
                return false;
            }
            var type = $(this).data('type');
            if(type == "add"){
                layer.msg(ids.val());
                return false;
            }else if(type == "edit"){
                layer.msg(ids.val());
                return false;
            }else if(type == "delete"){
                layer.msg(ids.val());
                return false;
            }
        });
    });
</script>